#!/bin/bash

# Get the absolute path of the current script
[ -n "${BASH_SOURCE[0]}" ] && SCRIPT_PATH="${BASH_SOURCE[0]}" || SCRIPT_PATH="$0"
SCRIPT_DIR=`dirname $SCRIPT_PATH`

export LETDEV_SYMBOL=':'
export LETDEV_PATH="$SCRIPT_DIR"

export LETDEV_USERS_PATH=`echo "$HOME/let-dev/profiles"`
export LETDEV_PROJECT_PATH=`echo "./.let-dev"`

pushd "$LETDEV_PATH" > /dev/null

# System commands
CMD=`./echo-add-folder-script './commands'`
eval "$CMD"

# Global user commands
if [ -d "$LETDEV_USERS_PATH/$LETDEV_PROFILE" ]; then 
    CMD=`./echo-add-folder-script "$LETDEV_USERS_PATH/$LETDEV_PROFILE"`
    eval "$CMD"
fi

# Shell command alias
alias $LETDEV_SYMBOL$LETDEV_SYMBOL="$LETDEV_PATH/shell/start.sh"

# Default command alias
alias $LETDEV_SYMBOL="source $LETDEV_PATH/default"

# Project user commands
export PATH="$LETDEV_PROJECT_PATH/$LETDEV_PROFILE:$PATH"

popd > /dev/null
